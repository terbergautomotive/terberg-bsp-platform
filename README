Toradex oe-core Setup with Mender
=================================

To simplify installation we provide a repo manifest which manages the different git repositories
and the used versions. (more on repo: http://code.google.com/p/git-repo/ )

Install the repo bootstrap binary:

  mkdir ~/bin
  PATH=~/bin:$PATH
  curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
  chmod a+x ~/bin/repo

Create a directory for your oe-core setup to live in and clone the meta information.

  mkdir oe-core
  cd oe-core
  repo init -u git@gitlab.com:terberg-automotive/terberg-bsp-platform.git -b LinuxImageV2.8-terberg
  repo sync

Optionally create a development branch in all git repositories

  repo start mybranch --all

Source the file export to setup the environment. On first invocation this also copies a sample
configuration to build/conf/*.conf.

  . export


Add the following to build/conf/local.conf

  MACHINE = "colibri-imx7-emmc"

  # The name of the disk image and Artifact that will be built.
  # This is what the device will report that it is running, and different updates must have different names
  # because Mender will skip installation of an Artifact if it is already installed.
  MENDER_ARTIFACT_NAME = "release-part-two"

  INHERIT += "mender-full"

  PREFERRED_PROVIDER_u-boot-fw-utils ?= "u-boot-toradex-fsl-fw-utils"
  PREFERRED_RPROVIDER_u-boot-fw-utils ?= "u-boot-toradex-fsl-fw-utils"

  IMAGE_FSTYPES_append = " sdimg.gz"

  IMAGE_FSTYPES_remove = "wic.gz teziimg"

  MENDER_STORAGE_TOTAL_SIZE_MB = "3072"

  MENDER_DATA_PART_SIZE_MB = "400"

  IMAGE_INSTALL_append = " kernel-image kernel-devicetree"

To start build run:

  bitbake console-tdx-image

## Provisioning device

